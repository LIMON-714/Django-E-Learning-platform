{% extends "common/base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/course.css' %}">
{% endblock extra_css %}

{% block title %}Courses{% endblock title %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-light fw-bold text-center">Our <span class="text-info">Courses</span></h2>
    <hr class="border-secondary mb-4">

    <div class="row justify-content-center">
        {% for course in courses %}
        <div class="col-md-4 mb-4 d-flex align-items-stretch">
            <div class="card course-card shadow-sm w-100">

                <!-- Thumbnail -->
                <img src="{{ course.thumbnail.url }}" class="card-img-top" alt="{{ course.title }}">

                <!-- Card Body -->
                <div class="card-body d-flex flex-column">
                    <!-- Title -->
                    <h6 class="text-info">{{ course.title }}</h6>

                    <!-- Short Description -->
                    <p class="small mb-2">{{ course.short_description|truncatechars:100 }}</p>

                    <!-- Extra Info -->
                    <ul class="list-unstyled mb-2 list-dis_name">
                        <li><strong>Total Class:</strong> {{ course.total_lessons }}</li>
                        <li><strong>Level:</strong> {{ course.level }}</li>
                        <li><strong>Rating:</strong> ‚≠ê {{ course.rating }}</li>
                    </ul>

                    <!-- Price with Discount -->
                    <div class="price-section mt-auto mb-3">
                        {% if course.discount_price %}
                            <span class="original-price text-info">${{ course.price }}</span>
                            <span class="discount-price"><del>${{ course.discount_price }}</del> off</span>
                        {% else %}
                            <span class="original-price">${{ course.price }}</span>
                        {% endif %}
                    </div>

                    <!-- Button -->
                    <a href="{% url 'course_detail' course.slug %}" class="btn btn-outline-info fw-semibold mt-auto">
                        View Details
                    </a>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-light text-center">No courses available.</p>
        {% endfor %}
    </div>
</div>
{% endblock content %}
