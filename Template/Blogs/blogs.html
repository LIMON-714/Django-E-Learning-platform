{% extends 'common/base.html' %}
{% load static %}

{% block title %}Blogs{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/blogs.css' %}">
{% endblock extra_css %}

{% block content %}
<div class="container py-5">
    <h1 class="blogs-header">All <span class="text-info">Blogs</span></h1>
    <hr class="border-secondary mb-4">

    <div class="row">
        {% for blog in blogs %}
        <div class="col-lg-4 col-md-6">
            <div class="blog-card">
                {% if blog.photo %}
                <img src="{{ blog.photo.url }}" alt="{{ blog.title }}" class="blog-image">
                {% endif %}
                <div class="blog-content">
                    <div class="blog-meta">
                        {{ blog.category.name|default:"Uncategorized"|title }} | 
                        {{ blog.created_at|date:"M d, Y"|default:"Unknown Date" }} | 
                        by {% if blog.author.first_name %}
                                {{ blog.author.first_name|title }}
                                {% if blog.author.last_name %} 
                                {{ blog.author.last_name|title }}
                                {% endif %}
                           {% else %}
                                Unknown
                           {% endif %}
                    </div>
                    <h3>{{ blog.title|title }}</h3>
                    <p class="blog-excerpt">{{ blog.content|truncatewords:25 }}</p>
                    <a href="{% url 'blog_detail' blog.id %}" class="see-more-btn">See More</a>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-secondary text-center">No blogs posted yet.</p>
        {% endfor %}
    </div>
</div>
{% endblock content %}
